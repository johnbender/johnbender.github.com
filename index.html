
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title></title>
    
    
    <meta name="author" content="John Bender">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="//johnbender.github.com/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="//johnbender.github.com/assets/themes/twitter/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="//johnbender.github.com/assets/themes/twitter/css/cv.css" rel="stylesheet" type="text/css" media="all">
    <link href="//johnbender.github.com/assets/themes/twitter/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body class="">
    <a href="https://plus.google.com/112550334078819814430?rel=author" style="display:none">Google</a>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="//johnbender.github.com">johnbender.us</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/portfolio.html">Portfolio</a></li>
      	
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/cv.html">Curriculum Vitae</a></li>
      	
      
    
  



          </ul>

          <div class="social-media">
            <a href="http://twitter.com/johnbender">
              <i class="icon-twitter-sign"></i>
            </a>
            <a href="http://github.com/johnbender">
              <i class="icon-github-sign"></i>
            </a>
            <a href="https://plus.google.com/112550334078819814430" rel="publisher">
              <i class="icon-google-plus-sign"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content">
        

<div class="page-header">
  <h1><a href="//johnbender.github.com/2014/04/07/presentation-differential-semantics">Presentation: Differential Semantics</a></h1>
</div>

<div class="row-fluid">
  <div class="span10 text">
    <p>
  A quick presentation I gave to my CS 239, Spring 2014 on my early thinking around deriving programmer intent from source control and program evolution.
</p>

<p style="margin-top: 2em
;">
  <script async class="speakerdeck-embed" data-id="af35e490a0b00131f6cb2abc05ca10ad" data-ratio="1.33333333333" src="//speakerdeck.com/assets/embed.js"></script>
</p>

  </div>

  <div id="info" class="span2">
    

    <h4>Published</h4>
    <div class="date">
      <span>07 Apr 2014</span>
    </div>

    
    <h4>Tags</h4>
    <ul class="tag_box">
      
      


  
    
    	<li><a href="/archive.html#presentation">presentation <span>5</span></a></li>
    
    	<li><a href="/archive.html#sql">sql <span>2</span></a></li>
    
    	<li><a href="/archive.html#math">math <span>15</span></a></li>
    
  



    </ul>
    
  </div>
</div>

<div class="page-header">
  <h1><a href="//johnbender.github.com/2013/11/04/a-better-sql">A Better SQL</a></h1>
</div>

<div class="row-fluid">
  <div class="span10 text">
    <p>The relational model for data is ubiquitous. That&#39;s in part due to SQL&#39;s declarative approach to manipulating and exploring data stored as relations. Unfortunately SQL has its warts. In particular schema changes made in the data definition subset of the language (DDL) [1] can be awkward for creating idempotent migrations. Enough so, that the responsibility is frequently delegated to the application layer where more expressive languages can be employed. Here I&#39;ll lay out an alternate semantics for SQL DDL that embraces schema change and expands the expressive power of DDL&#39;s declarative core.</p>

<h2 id="toc_0">A Common Activity</h2>

<p>To illustrate how schema changes break the initially declarative semantics of DDL, lets look at an example:</p>
<div class="highlight"><pre><code class="sql language-sql" data-lang="sql"><span class="k">create</span> <span class="k">table</span> <span class="n">foo</span> <span class="p">(</span>
  <span class="n">bar</span> <span class="nb">int</span><span class="p">,</span>
  <span class="n">baz</span> <span class="nb">text</span>
<span class="p">);</span>
</code></pre></div>
<p>All tables start this way. The only piece of syntax that might otherwise alert a new user to the fact that this is not an entirely descriptive declarative language is <code>create</code>. The definition is very much &quot;what&quot; is desired and not &quot;how&quot; to get it. This breaks down when anything about the table needs to change:</p>
<div class="highlight"><pre><code class="sql language-sql" data-lang="sql"><span class="k">create</span> <span class="k">table</span> <span class="n">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="n">foo</span> <span class="p">(</span>
  <span class="n">bar</span> <span class="nb">int</span><span class="p">,</span>
  <span class="n">baz</span> <span class="nb">text</span>
<span class="p">);</span>

<span class="k">alter</span> <span class="k">table</span> <span class="n">foo</span> <span class="k">add</span> <span class="k">column</span> <span class="n">bak</span> <span class="nb">text</span><span class="p">;</span>
</code></pre></div>
<p>All together this will ensure the proper end-state whether the target database is at the initial state without the table <code>foo</code> or at the second state where <code>foo</code> lacks the column <code>bak</code>. In this case it&#39;s easy to understand the final state of the table because the example is very simple, but it&#39;s acquired an imperative pall with the inclusion of the first <code>alter</code>. As the schema definition grows more complex through many <code>drop</code>, <code>add</code>, and type cast changes, the final state of the table becomes less clear:</p>
<div class="highlight"><pre><code class="sql language-sql" data-lang="sql"><span class="k">create</span> <span class="k">table</span> <span class="n">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="n">foo</span> <span class="p">(</span>
  <span class="n">bar</span> <span class="nb">int</span><span class="p">,</span>
  <span class="n">baz</span> <span class="nb">text</span>
<span class="p">);</span>

<span class="k">alter</span> <span class="k">table</span> <span class="n">foo</span> <span class="k">add</span> <span class="k">column</span> <span class="n">bak</span> <span class="nb">text</span><span class="p">;</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">foo</span> <span class="k">drop</span> <span class="k">column</span> <span class="n">bak</span> <span class="nb">text</span><span class="p">;</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">foo</span> <span class="k">add</span> <span class="k">column</span> <span class="n">baks</span> <span class="nb">text</span><span class="p">;</span>
</code></pre></div>
<p>It would be better to simply add columns to the original table definition, and then the shape of the resulting table would be immediately clear at a glance.</p>

<h2 id="toc_1">Differential Semantics</h2>

<p>In our toy example the desired table definition included a new column <code>bak</code>. An entirely descriptive update to the table declaration would look like this (Note that the original alter statement is absent):</p>
<div class="highlight"><pre><code class="sql language-sql" data-lang="sql"><span class="k">create</span> <span class="k">table</span> <span class="n">foo</span> <span class="p">(</span>
  <span class="n">bar</span> <span class="nb">int</span><span class="p">,</span>
  <span class="n">baz</span> <span class="nb">text</span><span class="p">,</span>
  <span class="n">bak</span> <span class="nb">text</span>
<span class="p">);</span>
</code></pre></div>
<p>Unfortunately the SQL runtime considers the syntax in isolation and makes no attempt to reconcile that with it&#39;s internal representation. That makes perfect sense because a user is permitted to run small, ad hoc snippets in addition to full schema migration scripts. That is, the RDBMS can&#39;t know where this declaration is coming from nor why it&#39;s being run so it&#39;s unsafe to assume it should do any reconciliation. In contrast a well outfitted user can provide exactly that information.</p>
<div class="highlight"><pre><code class="diff language-diff" data-lang="diff"><span class="gu">@@ -1,4 +1,5 @@</span>
 create table foo (l;
   bar int,
<span class="gd">-  baz text</span>
<span class="gi">+  baz text,</span>
<span class="gi">+  bak text</span>
 );
</code></pre></div>
<p>Looking at the diff, it&#39;s clear that the intention is to add the column <code>bak</code> to the table. What&#39;s required then, is to assign some semantics to this diff. With that established a simple pre-processor could map this differential to the corresponding alter statement in DDL, namely the original alter statement.</p>

<p>The key insight here is that we can permit schema migrations while retaining an entirely descriptive declarative syntax by appealing to the differential information available via source control tools.</p>

<h2 id="toc_2">Value Proposition</h2>

<p>The basic value proposition is reduced cognitive overhead when maintaining schemas using SQL DDL. In addition, DDL&#39;s syntax is reduced by about half because alters and drops [2] can simply go away which should make it easier to learn [3].</p>

<p>This could also be pushed up the stack to migration tools by an enterprising library or framework author. For example, Rails generates and maintains a <code>db/schema.rb</code> file that is supposed to represent the state of the schema for the associated migrations. A similar technique could be applied there to divine the appropriate alterations when an change to that file is made in place of using migrations for schema changes.</p>

<p>Finally, by associating meaning with syntactic change the user can more safely understand and execute post commit reverts to schema changes. That is, instead of manually defining the necessary steps to &quot;undo&quot; some previous schema change, the source control system can provide the exact information that is necessary.</p>

<h2 id="toc_3">Pitfalls</h2>

<p>Obviously, not every migration is just about the schema. Frequently the data has to be altered to conform to the target schema. This is actually an area of active research in the Database Systems community [4].</p>

<h2 id="toc_4">Conclusion</h2>

<p>For the interested reader, I started work on a <a href="https://github.com/johnbender/sql-delta">preprocessor</a> implemented in Haskell. Unfortunately since I don&#39;t have any plans to pursue this further I haven&#39;t been working on it. Also, for comparison I&#39;ve included two very simple sets of denotational semantics in the footnotes; one to represent the current implementation and one to represent the differential semantics [5]. They highlight the symmetry of this new approach to the language when compared with the current implementation.</p>

<p>This technique can be extended to other languages that manage system state declaratively like configuration management DSLs or even HTML. Though in the case of configuration management, understanding the mapping between syntax and state is quite complex because system components frequently generate artifacts that are not explicitly declared.</p>

<p>Broadly, the idea of differential semantics is to gather more information about intent from readily available sources so that language runtimes (declarative or otherwise) can make more informed decisions about user intent. The results need not be confined to accurate interpretation of the desired system state.</p>

<h3 id="toc_5">Footnotes</h3>

<ol>
<li><a href="http://en.wikipedia.org/wiki/Data_definition_language">http://en.wikipedia.org/wiki/Data_definition_language</a></li>
<li>In our example a drop would be accomplished by removing the table definition completely.</li>
<li>The mapping presumes feature parity in the create with the alter statements, but in my study of the standard and Postgres&#39; implementation this appears to be the case.</li>
<li>There&#39;s a lot of interesting work and tooling around preventing issues resulting from schema migrations: <a href="http://scholar.google.com/scholar?q=prism+schema+evolution&amp;btnG=&amp;hl=en&amp;as_sdt=0%2C5">schema evolution</a>.</li>
<li>A denotational semantics for both the current DDL semantics and the proposed semantics. Note that in the proposed section the &quot;differential&quot; semantics eval function is parameterized by the state of the syntax.</li>
</ol>

<script async class="speakerdeck-embed" data-id="04706730a1090131ed084e04b85186c1" data-ratio="0.772830188679245" src="//speakerdeck.com/assets/embed.js"></script>

  </div>

  <div id="info" class="span2">
    
    <h4>Vote/Comment</h4>
    <ul id="vote">
      <li>
        <a id="hn" href="https://news.ycombinator.com/item?id=6670048" alt="Hacker News">Hacker News</a>
      </li>
    </ul>
    

    <h4>Published</h4>
    <div class="date">
      <span>04 Nov 2013</span>
    </div>

    
    <h4>Tags</h4>
    <ul class="tag_box">
      
      


  
    
    	<li><a href="/archive.html#sql">sql <span>2</span></a></li>
    
  



    </ul>
    
  </div>
</div>

<div class="page-header">
  <h1><a href="//johnbender.github.com/2013/09/16/why-im-getting-a-phd">Why I'm Getting a PhD</a></h1>
</div>

<div class="row-fluid">
  <div class="span10 text">
    <p>The 26th is the first day of instruction in the first academic year of my PhD in Computer Science at UCLA. I have a two year old daughter, an incredibly supportive wife, and I just turned 30.</p>

<p>Unsurprisingly, I&#39;ve been asked many times why I want to get a PhD and I rarely get a chance to explain my thinking fully. This post is both a detailed account of my reasons and a counterpoint to the popular opinion that there isn&#39;t much value in higher education in Computer Science.</p>

<h2 id="toc_0">Why Bother?</h2>

<p>Any confusion or surprise over my decision to go back to school can generally be reduced to a simple idea: the success I would otherwise have while getting my PhD is of greater absolute value than the education.</p>

<p>This comes in many reasonable forms. Why are you leaving such a high paying job? Will you be able to speak at conferences? When will you find time to contribute to open source? Couldn&#39;t you just work on those ideas in your free time? These questions are asked directly and without implication.</p>

<p>In some cases there is a subtle suggestion that academia and higher education are losing their value. Why would someone pursue a PhD when there are people without any higher education earning comparable salaries and working on important projects? I never hear this asked explicitly, but it comes through in many conversations and the idea that education isn&#39;t important is pervasive in the software &quot;meritocracy&quot;.</p>

<p>In each case, I&#39;m consistently left wanting more time to describe my thinking and the personal experiences that landed me in a PhD program.</p>

<h2 id="toc_1">Career Path</h2>

<p>When I got my first legitimate management position as the director of engineering at a consultancy/incubator it quickly became clear that management wasn&#39;t for me. I enjoyed seeing my teammates succeed. I enjoyed building and refining Process. I enjoyed winning business. I enjoyed the subtleties of communicating complex technical ideas to people with all types of backgrounds and experience. By my own estimation I was even pretty good at all those things.</p>

<p>The thing that got to me was the amount of time I spent staring at my email client. After a year I missed the technical aspects of the job, and I started to think about my long-term career options. At the time I saw three paths that didn&#39;t route back through school.</p>

<ol>
<li><strong>Avoid titles and stick with engineering</strong> This was, at least initially, the path I took. I left for Adobe and a position working full time on jQuery Mobile.</li>
<li><strong>Grab the title and climb the ladder</strong> Management positions pay a lot of money, and there&#39;s a lot of room for advancement. Not all require you to hand over your keyboard.</li>
<li><strong>Employee Number One or Co-Founder</strong> First employee/Co-Founder positions are available for experienced &quot;generalists&quot; as far as I can tell. This is purely based on personal observations and conversation with friends who are better informed on the topic.</li>
</ol>

<p>Of course, there are a lot of subtle variants to each of these, but this was my assessment. I can say with confidence that my move to Adobe put me in an ideal engineering position. Working on an OSS project full time gave me the freedom to pursue long term solutions to difficult problems and I still had access to the good parts of a large corporate support infrastructure.</p>

<p>Unfortunately, the problems I gravitate towards are not normally assigned to engineers and attempts to marry my interests with my domain of expertise [1,2] have met with understandably tepid responses. The ideas are hard to follow in short presentations, most people don&#39;t have time to read marathon blog posts, and the underlying work isn&#39;t funded by my employer. All of that makes perfect sense but it means I can&#39;t focus on the problems that I&#39;m interested in.</p>

<h2 id="toc_2">What Interests Me</h2>

<p>The things that keep me up past midnight working and learning are technical. Problems both large and small that remain unsolved or problems where the solution seems unsatisfactory to me. A short and incomplete list in no particular order:</p>

<ul>
<li>Descriptive declarative languages that aren&#39;t</li>
<li>Correctness in dynamic languages</li>
<li>System configuration and state management</li>
<li>Adoption, understanding, and value of advanced type systems</li>
<li>Direct applications of mathematics to programming languages</li>
<li>Semantics based approaches to hot code loading</li>
<li>Preventing language bugs/quirks during language creation</li>
</ul>

<p>A few of these might align with a job posting somewhere but most don&#39;t. More importantly, I&#39;m not as interested in the implementation as I am in conceiving a solution and understanding its value. I&#39;m sure that will sound like laziness to some, but the part I enjoy the most is thinking through the idea. Most of the time an implementation is an important part of that, and I enjoy hacking as much as anyone, but sometimes it&#39;s not. Sometimes a more abstract representation of the problem is the best way to predict the relative value of a solution before committing time and effort to an implementation. Again, this isn&#39;t the type of work that engineers get funded to do.</p>

<h2 id="toc_3">On Academia</h2>

<p>Perception of academia varies depending on the field and an individual&#39;s cultural disposition. In the software community there is a certain sense of respect for the research and science on which our careers are built. People have even sort of deified greats like Alan Kay, Alonzo Church, and Alan Turing.</p>

<p>More and more though, the word &quot;academic&quot; is being used as a pejorative to mean irrelevant, unimportant, or a wasted effort. It&#39;s easy to wave this away as an issue of sloppy semantics but I think it highlights the suffering perception of academics. In my experience working on research projects and doing a lot of reading over the last few years, much of the stigma appears to result from two issues. The first is, what people think research should be for, and the second is the occasionally impenetrable nature of formalism.</p>

<p>Computer Science research is frequently accompanied by proof of concept software. It might be poorly constructed, hard to get working, or even hard to find. In turn, that can lead to a poor opinion of the research and researchers, but the implementations are rarely the primary contribution of the work. The goal of the researcher is <em>not</em> to provide implementations or information directly to industry, but rather to produce a solution to an outstanding problem. The work of translating that solution into something &quot;well built&quot; or even concrete is frequently left to the reader.</p>

<p>Unfortunately, reading Computer Science papers can be hard work. The deluge of notation can be discouraging. It can even seem like unnecessary ceremony, but a lot of ground has to be covered in the limited space provided for conference publications. Moreover, formalism and logic are the most important tools we have when streamlining and finding consensus on a good solution. In a perfect world all the necessary context would be easily accessible, and the formal tools used to establish properties of a solution would be easy to understand. Sadly that&#39;s not the case, but it doesn&#39;t diminish the value of the &quot;encoded&quot; contribution.</p>

<p>It&#39;s <em>because</em> of these things and not in spite of them that I&#39;m going back to school. I want to work in an environment that explicitly promotes a focus on the fundamentals of a problem and requires that the utmost care be taken when presenting a solution.</p>

<h2 id="toc_4">The Fourth Path</h2>

<p>I guess you could say I&#39;m taking The Fourth Path™.</p>

<p>While I may be new to the academic environment, I have taken efforts to ensure that my impressions are not naive. I have been working on research projects since last year with folks at UCLA and I have been attending regular reading groups. I also know what problems I want to work on; one of which I&#39;m pursuing with a strong blessing from my adviser.</p>

<p>Even if this doesn&#39;t turn out as planned, at least I know that the &quot;what&quot; and &quot;how&quot; of my work will fit and that&#39;s why I&#39;m getting a PhD.</p>

<p><br/></p>

<h3 id="toc_5">Acknowledgments</h3>

<p>Thanks to <a href="https://twitter.com/keyist">@keyist</a> and <a href="https://twitter.com/melliebe">@melliebe</a> for their notes and revisions.</p>

<p>Special thanks to <a href="http://philipmjohnson.wordpress.com/">Professor Philip M. Johnson</a> who has helped me continuously since I graduated from the University of Hawaii more than seven years ago. His advice has been extremely important in my long and winding path back to academia.</p>

<h3 id="toc_6">Footnotes</h3>

<ol>
<li><a href="/2013/08/29/presentation-faster-javascript-through-category-theory/">Presentation: Faster JavaScript through Category Theory</a></li>
<li><a href="/2013/07/19/presentation-math-envy-and-coffeescripts-foibles/">Presentation: Math Envy and CoffeeScript&#39;s Foibles</a></li>
<li>&quot;Less&quot; is not, &quot;not at all&quot;</li>
</ol>

<p>I also have a short list of things I&#39;m <em>not</em> interested in. I intended to include this in the main body of the post but it seemed like a distraction.</p>

<p>As a web developer and someone who&#39;s worked almost exclusively on the client side for the last few years I have a fairly long list of things that do not interest me or are an active source of frustration. Nearly all of them would be impossible to describe as &quot;general&quot; problems.</p>

<ul>
<li>Esoteric browser bugs (yes they still exist in abundance)</li>
<li>The culture/necessity of JavaScript micro-libraries</li>
<li>Effort required to provide broad access to web based content</li>
<li>Dynamic programming languages as an industry default</li>
<li>Non-transferable esoterica (e.g., how iptables works on CentOS, Chef&#39;s attribute resolution order)</li>
<li>Large JavaScript projects</li>
</ul>

<p>I&#39;m not above working on, or around, these problems. For a web developer many of these are simply facts of life. I&#39;m just not content to let them bother me indefinitely which means contributing to solutions or moving on.</p>

  </div>

  <div id="info" class="span2">
    
    <h4>Vote/Comment</h4>
    <ul id="vote">
      <li>
        <a id="hn" href="http://news.ycombinator.com/" alt="Hacker News">Hacker News</a>
      </li>
    </ul>
    

    <h4>Published</h4>
    <div class="date">
      <span>16 Sep 2013</span>
    </div>

    
    <h4>Tags</h4>
    <ul class="tag_box">
      
      


  
    
    	<li><a href="/archive.html#career">career <span>1</span></a></li>
    
    	<li><a href="/archive.html#education">education <span>1</span></a></li>
    
  



    </ul>
    
  </div>
</div>


      </div>

      
        

          
            
          

          

        

          

          

        

          

          

        

          

          

        

          

          
            
          

        
      

    <div class="pagination">
      <ul>
        <li><a href="//johnbender.github.com/archive.html">Archive</a></li>
      </ul>
    </div>

    <footer>
      <p>&copy; John Bender 2012
        with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
        and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
      </p>
    </footer>

    </div>

    


  <!-- -->
  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21257360-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




  </body>
</html>

