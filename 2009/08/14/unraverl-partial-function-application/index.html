
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>Unraverl: Partial Function Application</title>
    
    
    <meta name="author" content="John Bender">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="//johnbender.github.com/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="//johnbender.github.com/assets/themes/twitter/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="//johnbender.github.com/assets/themes/twitter/css/cv.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="//johnbender.github.com">johnbender.us</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/cv.html">Curriculum Vitae</a></li>
      	
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/portfolio.html">Portfolio</a></li>
      	
      
    
  



          </ul>

          <div class="social-media">
            <a href="http://twitter.com/johnbender">
              <img src="//johnbender.github.com/assets/themes/twitter/../../../assets/images/twitter.png">
            </a>
            <a href="http://github.com/johnbender">
              <img src="//johnbender.github.com/assets/themes/twitter/../../../assets/images/github.png">
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content">
        
<div class="page-header">
  <h1>Unraverl: Partial Function Application</h1>
</div>

<div class="row-fluid">
  <div class="span10 text">
    Last weekend I hacked partial application into my parse transform for erlang, unraverl. The rules are very simple but the implications are interesting if nothing else.

In other functional languages, haskell as an example, there's nothing inherently wrong with defining a function that requires two arguments but giving it one.

<pre>
<span class="function-name">add</span> x y <span class="variable-name">=</span> x <span class="variable-name">+</span> y
<span class="function-name">example</span> <span class="variable-name">=</span> add 1
<span class="comment-delimiter">{- </span><span class="comment">=&gt; \y -&gt; 1 + y -}</span></pre>

The result is a lambda where the supplied argument is applied across the code in the function.

<h2>Unraverl's implementation?</h2>

Using the initial example in Erlang

<pre>
<span class="function-name">add</span>(x, y) -&gt;<span class="function-name"> </span>x + y.

<span class="function-name">example</span>() -&gt;<span class="function-name"> </span>add(1).
</pre>

the parse transform sees that there are no local (only) functions named 'add' with an arity of 1. It then finds the next highest arity definition and changes the call to accommodate

<pre>
<span class="comment-delimiter">%% </span><span class="comment">roughly
</span><span class="function-name">example</span>() -&gt;<span class="function-name"> </span><span class="keyword">fun</span>(y) -&gt;<span class="function-name"> </span>add(1, y) <span class="keyword">end</span>.</pre>

So while haskell applies whatever arguments are available to the actual function (internally I'm not sure how its implemented), unraverl simply wraps a call to the actual function in a new fun requiring the remaining arguments.

To make use of this feature in your own applications simply add the compiler directive

<pre>
<span class="function-name">-compile</span>([{parse_transform, unraverl}]). </pre>

and make sure the <a href="http://github.com/johnbender/unraverl/tree/master">library</a> is in the code path.

As yet, it doesn't have a makefile or unit tests so use at your own peril.



    
  </div>

  <div id="info" class="span2">
  

    <h4>Published</h4>
    <div class="date"><span>14 August 2009</span></div>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
    
    	<li><a href="#erlang-ref">erlang <span>6</span></a></li>
    
  



    </ul>
  
  </div>
</div>


      </div>

    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="//johnbender.github.com/2009/06/16/bootstraps-now-with-less-crapyness" title="BootStraps: now with less crapyness">&larr; Previous</a></li>
      
        <li><a href="//johnbender.github.com/archive.html">Archive</a></li>
      
        <li class="next"><a href="//johnbender.github.com/2009/08/22/rquery-refactored-and-simplified" title="RQuery: refactored and simplified">Next &rarr;</a></li>
      
      </ul>
    </div>

    <footer>
      <p>&copy; John Bender 2012
        with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
        and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
      </p>
    </footer>

    </div>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21257360-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




  </body>
</html>

