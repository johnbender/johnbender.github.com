
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>BootStraps: now with less crapyness</title>
    
    
    <meta name="author" content="John Bender">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="//johnbender.github.com/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="//johnbender.github.com/assets/themes/twitter/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="//johnbender.github.com/assets/themes/twitter/css/cv.css" rel="stylesheet" type="text/css" media="all">
    <link href="//johnbender.github.com/assets/themes/twitter/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all">
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body class="">
    <a href="https://plus.google.com/112550334078819814430?rel=author" style="display:none">Google</a>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="//johnbender.github.com">johnbender.us</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/portfolio.html">Portfolio</a></li>
      	
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/archive.html">Archive</a></li>
      	
      
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
      	
        <li><a href="//johnbender.github.com/cv.html">Curriculum Vitae</a></li>
      	
      
    
  



          </ul>

          <div class="social-media">
            <a href="http://twitter.com/johnbender">
              <i class="icon-twitter-sign"></i>
            </a>
            <a href="http://github.com/johnbender">
              <i class="icon-github-sign"></i>
            </a>
            <a href="https://plus.google.com/112550334078819814430" rel="publisher">
              <i class="icon-google-plus-sign"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content">
        
<div class="page-header">
  <h1>BootStraps: now with less crapyness</h1>
</div>

<div class="row-fluid">
  <div class="span10 text">
    I've been getting rid of my TODO's in my mini bootstrapping library whilst focusing on my Sinatra app and the config file looks a lot less crappy now. It even looks a tiny bit awesome. Its doesn't do everything (still need to put my app/* directories in here) but it serves my purposes and remains flexible:

    <pre>
<span class="type">BootStraps</span>::<span class="type">Initializer</span>.configure <span class="keyword">do</span> |config|

  <span class="comment-delimiter">#</span><span class="comment">Use the vendor directory
</span>  config.vendored = <span class="variable-name">true</span>
  config.default_env = <span class="string">'production'</span>

  <span class="comment-delimiter">#</span><span class="comment">require each gem
</span>  config.gem <span class="string">'activerecord'</span>
  config.gem <span class="string">'sinatra'</span>
  config.gem <span class="string">'json'</span>
  config.gem <span class="string">'haml'</span>
  config.gem <span class="string">'twitter'</span>
  config.gem <span class="string">'nakajima-rack-flash'</span>

  <span class="comment-delimiter">#</span><span class="comment">action taken when config.db.connect is called
</span>  config.db.connect_action <span class="keyword">do</span>
    <span class="type">ActiveRecord</span>::<span class="type">Base</span>.establish_connection( 
        <span class="constant">:adapter</span> =&gt; <span class="string">'sqlite3'</span>,
        <span class="constant">:dbfile</span> =&gt;  <span class="type">File</span>.join(config.root, <span class="string">'db'</span>, <span class="string">"</span><span class="variable-name">#{config.env}</span><span class="string">.sqlite3"</span> ))

  <span class="keyword">end</span>

  <span class="comment-delimiter">#</span><span class="comment">Sinatra settings
</span>  config.framework.set <span class="constant">:environment</span>, config.env
  config.framework.set <span class="constant">:views</span>, <span class="type">File</span>.join(<span class="string">'app'</span>,<span class="string">'views'</span>)
  config.framework.set <span class="constant">:server</span>, <span class="string">'mongrel'</span>
  config.framework.use <span class="type">Rack</span>::<span class="type">Session</span>::<span class="type">Cookie</span>, <span class="constant">:domain</span> =&gt; <span class="string">'localhost'</span>
  config.framework.use <span class="type">Rack</span>::<span class="type">Flash</span>, <span class="constant">:sweep</span> =&gt; <span class="variable-name">true</span>
<span class="keyword">end</span>
</pre>

<br />

No more string literal library names (holy cow that was bad), a nice flexible block for defining the db connection code, and little method missing spice to run whatever methods on whatever framework I'm using.

Using the config has been simplified as well:

  <pre>
require <span class="string">'config/bootstraps'</span>

<span class="keyword">module</span> <span class="type">MyMod</span>
  <span class="keyword">class</span> <span class="type">MyApp</span> &lt; <span class="type">Sinatra</span>::<span class="type">Base</span>

    configure <span class="keyword">do</span>
      <span class="type">Straps</span>.db.connect
      <span class="type">Straps</span>.framework.apply_settings!(<span class="variable-name">self</span>)
    <span class="keyword">end</span>

  <span class="keyword">end</span>
<span class="keyword">end</span>
</pre>

<br />

Thinking about rolling it into a gem just to save myself time down the road. 


    
  </div>

  <div id="info" class="span2">
  

    <h4>Published</h4>
    <div class="date"><span>16 Jun 2009</span></div>

  
    <h4>Tags</h4>
    <ul class="tag_box">
    
    


  
    
    	<li><a href="/archive.html#ruby">ruby <span>12</span></a></li>
    
  



    </ul>
  
  </div>
</div>


      </div>

      

    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="//johnbender.github.com/2009/06/09/bootstrapping-a-sinatra-app" title="BootStrapping a Sinatra app">&larr; Older</a></li>
      
        <li><a href="//johnbender.github.com/archive.html">Archive</a></li>
      
        <li class="next">
          <a href="//johnbender.github.com/2009/08/14/unraverl-partial-function-application" title="Unraverl: Partial Function Application">Newer &rarr;</a>
        </li>
      
      </ul>
    </div>

    <footer>
      <p>&copy; John Bender 2012
        with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
        and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
      </p>
    </footer>

    </div>

    

  </body>
</html>

